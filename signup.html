<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RON ORP - Sign up</title>
    <!-- CSS-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="icon" type="image/x-icon" href="https://joyselise.github.io/ronlogin/img/favicon.ico">
    <link rel="stylesheet" href="https://joyselise.github.io/ronlogin/css/signup.css" />
  </head>
  <body>
    <!-- nav -->
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <a class="navbar-brand fs-1 fw-semibold pt-3" href="https://stg-ronreload.slsweb.ch/">
          <img src="https://joyselise.github.io/ronlogin/img/ron_logo.svg" alt="ron-logo" style="width:140px;">
        </a>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0"></ul>
        </div>
      </div>
    </nav>

    <div class="wrapper">
      <div id="formContent">
        <div id="api" role="main"></div>
        <div id="loginPrompt">
          Already have an account? <a class="loginPromptBtn" href="javascript:void(0);" onclick="history.back()">Log in</a>
        </div>
      </div>
      <div class="join">
        <p>
          The Ron Community already has 350,000 members. <strong>Join In!</strong>
        </p>
        <div class="community-img d-flex">
          <img src="https://joyselise.github.io/ronlogin/img/pimage.png" alt="community">
          <img class="community-ml" src="https://joyselise.github.io/ronlogin/img/pimage4.png" alt="community">
          <img class="community-ml" src="https://joyselise.github.io/ronlogin/img/pimage2.png" alt="community">
          <img class="community-ml" src="https://joyselise.github.io/ronlogin/img/pimage3.png" alt="community">
          <div class="communityNumber community-ml bg-dark rounded-circle">
            <p class="text-light">401k</p>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      $('.heading h1').text('Welcome to Ron');
      $('.intro p').text('Create an account');
      $('#emailVerificationCode_label').text('Enter the verification code');
      $('#emailVerificationControl_but_send_new_code').text('Resend Code');
      $('.city_li').after('<div class="form-check mt-3 pb-1 termschecked"><input class="form-check-input" type="checkbox" value="termsncondition" id="termschecked"><label class="form-check-label" for="termschecked">I accept the <a href=""><b>Terms and conditions.</b></a></label></div><div class="form-check newssignupchecked"><input class="form-check-input" type="checkbox" value="newslettersignup" id="newssignupchecked"checked><label class="form-check-label" for="newssignupchecked">Sign up to our newsletter.</label></div>');$('#newssignupchecked').on('change',function(){conditionalContinueBtn()});$('#termschecked').on('change',function(){conditionalContinueBtn()});function conditionalContinueBtn(){if($('#termschecked').is(":checked")&&$('#newssignupchecked').is(":checked")){$('#continue').show()}else{$('#continue').hide()}}
      $('#continue').text('Sign Up');
      $('#passwordEntryMismatch').insertAfter('#reenterPassword');

      function makePwdToggler(pwd){
        // Create show-password checkbox
        var checkbox = document.createElement('input');
        checkbox.setAttribute('type', 'checkbox');
        var id = pwd.id + 'toggler';
        checkbox.setAttribute('id', id);

        var label = document.createElement('label');
        label.setAttribute('for', id);
        label.appendChild(document.createTextNode('show password'));

        var div = document.createElement('div');
        div.appendChild(checkbox);
        div.appendChild(label);

        // Add show-password checkbox under password input
        pwd.insertAdjacentElement('afterend', div);

        // Add toggle password callback
        function toggle(){
          if(pwd.type === 'password'){
            pwd.type = 'text';
          } else {
            pwd.type = 'password';
          }
        }
        checkbox.onclick = toggle;
        // For non-mouse usage
        checkbox.onkeydown = toggle;
      }

      function setupPwdTogglers(){
        var pwdInputs = document.querySelectorAll('input[type=password]');
        for (var i = 0; i < pwdInputs.length; i++) {
          makePwdToggler(pwdInputs[i]);
        }
      }

      setupPwdTogglers();
      $('.sendNewCode').after('<p class="newcodeText" style="display:none;">Have not received any code yet?</p>');

      // for resend code
        var button = document.getElementById('emailVerificationControl_but_send_new_code');
        var paragraph = document.querySelector('.newcodeText');

        // Function to check button style and update paragraph
        function updateParagraphStyle() {
            if (button.style.display === 'inline') {
                paragraph.style.display = 'inline';
            } else {
                paragraph.style.display = 'none';
            }
        }

        // Event listener for button (if the style changes on click)
        button.addEventListener('click', function() {
            // Update paragraph style after a short delay
            setTimeout(updateParagraphStyle, 100); //delay
        });

        // MutationObserver to watch for style changes
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.attributeName === 'style') {
                    updateParagraphStyle();
                }
            });
        });

        // Start observing the button
        observer.observe(button, { attributes: true });

        // for verificatrions
        var successMessageDiv = document.getElementById('emailVerificationControl_success_message');
        var elementsToUpdate = document.querySelectorAll('.newPassword_li, .reenterPassword_li, .city_li, .termschecked, .newssignupchecked');

        // Function to update display of elements
        function updateElementDisplay() {
            var displayStyle = successMessageDiv.style.display === 'inline' ? 'inline' : 'none';

            elementsToUpdate.forEach(function(element) {
                element.style.display = displayStyle;
            });
        }

        // MutationObserver for style changes
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.attributeName === 'style') {
                    updateElementDisplay();
                }
            });
        });

        // Start observing the div
        observer.observe(successMessageDiv, { attributes: true });

        // Initial update in case the div already has the desired style
        updateElementDisplay();

    </script>
  </body>
</html>